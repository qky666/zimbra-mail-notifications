{"version":3,"sources":["webpack:///webpack/bootstrap ab6a4597eb568e570d38?369f","webpack:///./src/opciones.js"],"names":["angular","module","controller","$scope","$timeout","$window","limpiarStatus","status","statusURL","estilo","colorStatusUrl","guardarOpciones","deshabilitarBotones","strToURL","UtilesURL","stringToURL","opciones","urlZimbra","hasOwnProperty","LogZimbra","log","chrome","i18n","getMessage","color","$apply","JSON","stringify","OpcionesStorage","setOpciones","restablecerOpciones","getOpciones","urlZimbraModificado","navegadorEsFirefox","UtilesFirefox","init","ui","pageTitle","labelInterval","labelServerURL","labelShowNotifications","labelPermanentNotifications","btnSave","btnCancel","btnPorDefecto"],"mappings":"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","file":"opciones-bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap ab6a4597eb568e570d38\n **/","/**\n * Módulo asociado a la página de opciones (options.html) de la extensión\n */\nangular.module(\"zimbraNotificationsOptions\", [])\n  .controller(\"OptionsCtrl\", function ($scope, $timeout, $window) {\n\n  \tfunction limpiarStatus () {\n  \t\t$scope.status = \"\"\n\t\t\t$scope.statusURL = \"\"\n\t\t\t$scope.estilo.colorStatusUrl = {}\n  \t} \n\n    /**\n     * Graba los valores actuales de las opciones en el almacenamiento de Chrome\n     */\n    $scope.guardarOpciones = function () {\n\n    \t$scope.deshabilitarBotones = true\n    \tlet strToURL = UtilesURL.stringToURL($scope.opciones.urlZimbra)\n  \t\tif (strToURL.hasOwnProperty('error')) {\n  \t\t\tLogZimbra.log(\"¡URL no válida!\")\n  \t\t\t$scope.statusURL = chrome.i18n.getMessage(\"options_invalid_url\")\n  \t\t\t$scope.estilo.colorStatusUrl = {color:'red'}\n  \t\t\t$scope.deshabilitarBotones = false\n  \t\t\t$scope.$apply()\n       \treturn\n  \t\t} else {\n  \t\t\tLogZimbra.log(\"URL correcta. Voy a establecer opciones. $scope.opciones=\"+JSON.stringify($scope.opciones))\n        OpcionesStorage.setOpciones($scope.opciones, function () {\n  \t\t\t\tLogZimbra.log(\"callback URL correcta\")\n\t\t\t  \t$scope.status = chrome.i18n.getMessage(\"options_saved\")\n\t\t\t\t\t$scope.statusURL = chrome.i18n.getMessage(\"options_saved\")\n\t\t\t\t\t$scope.estilo.colorStatusUrl = {}\n\t\t\t\t\t$scope.deshabilitarBotones = false\n          $scope.$apply()\n          $timeout(\n          \tfunction() {\n              limpiarStatus()\n              // $scope.$apply()\n          \t}, \n          \t2000\n         \t)\n         \t//$scope.restablecerOpciones({limpiarStatus:false})\n    \t\t})\n  \t\t}\n\n    }\n\n    /**\n     * Restablece los valores de las opciones a partir de las guardadas anteriormente en el almacenamiento de Chrome\n     */\n    $scope.restablecerOpciones = function () {\n    \tLogZimbra.log(\"Restablecer Opciones. Inicio\")\n    \t$scope.deshabilitarBotones = true\n\n    \t// if (params && params.limpiarStatus) {\n    \t// \tlimpiarStatus()\t\n    \t// }\n\n\t\t\t\n\t\t\tOpcionesStorage.getOpciones(function(opciones) {\n\t\t\t\tLogZimbra.log(\"Restablecer Opciones. Callback. Opciones recibidas: \" + JSON.stringify(opciones))\n\t  \t\t$scope.opciones = opciones\n\t  \t\t$scope.deshabilitarBotones = false\n      \t$scope.$apply()\n\t\t\t})\n\t\t\t    \t\n    }\n\n\n    $scope.urlZimbraModificado = function () {\n    \tif($scope.statusURL != \"\") {\n    \t\t$scope.statusURL = \"\"\n    \t\t$scope.estilo.colorStatusUrl = {}\n    \t}\n    }\n\n    $scope.navegadorEsFirefox = function () {\n      return UtilesFirefox.navegadorEsFirefox()\n    }\n\n    /**\n     * Código de inicialización para este controlador\n     */\n    function init () {\n      // Inicializamos los valores dependientes del idioma\n      $scope.ui = {}\n      $scope.ui.pageTitle = chrome.i18n.getMessage(\"options_page_title\")\n      $scope.ui.labelInterval = chrome.i18n.getMessage(\"options_label_interval\")\n      $scope.ui.labelServerURL = chrome.i18n.getMessage(\"options_label_server_URL\")\n      $scope.ui.labelShowNotifications = chrome.i18n.getMessage(\"options_label_show_notifications\")\n      $scope.ui.labelPermanentNotifications = chrome.i18n.getMessage(\"options_label_permanent_notifications\")\n      $scope.ui.btnSave = chrome.i18n.getMessage(\"options_btn_save\")\n      $scope.ui.btnCancel = chrome.i18n.getMessage(\"options_btn_cancel\")\n      $scope.ui.btnPorDefecto = chrome.i18n.getMessage(\"options_btn_por_defecto\")\n\n      $scope.estilo = {}\n      $scope.estilo.colorStatusUrl = {}\n\n      $scope.deshabilitarBotones = false\n\n      // Cargamos los valores guardados anteriormente en el almacenamiento de Chrome\n      $scope.restablecerOpciones()\n    }\n\n    init()  //Inicializamos el controlador.\n      \n  })\n\n\n/** WEBPACK FOOTER **\n ** ./src/opciones.js\n **/"],"sourceRoot":""}