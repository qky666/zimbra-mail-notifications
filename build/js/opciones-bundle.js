!function(e){function o(i){if(t[i])return t[i].exports;var s=t[i]={exports:{},id:i,loaded:!1};return e[i].call(s.exports,s,s.exports,o),s.loaded=!0,s.exports}var t={};return o.m=e,o.c=t,o.p="",o(0)}([function(e,o){"use strict";angular.module("zimbraNotificationsOptions",[]).controller("OptionsCtrl",function(e,o,t){function i(){e.status="",e.statusURL="",e.estilo.colorStatusUrl={}}function s(){e.ui={},e.ui.pageTitle=chrome.i18n.getMessage("options_page_title"),e.ui.labelInterval=chrome.i18n.getMessage("options_label_interval"),e.ui.labelServerURL=chrome.i18n.getMessage("options_label_server_URL"),e.ui.labelShowNotifications=chrome.i18n.getMessage("options_label_show_notifications"),e.ui.labelPermanentNotifications=chrome.i18n.getMessage("options_label_permanent_notifications"),e.ui.btnSave=chrome.i18n.getMessage("options_btn_save"),e.ui.btnCancel=chrome.i18n.getMessage("options_btn_cancel"),e.ui.btnPorDefecto=chrome.i18n.getMessage("options_btn_por_defecto"),e.estilo={},e.estilo.colorStatusUrl={},e.deshabilitarBotones=!1,e.restablecerOpciones()}e.guardarOpciones=function(){e.deshabilitarBotones=!0;var t=UtilesURL.stringToURL(e.opciones.urlZimbra);return t.hasOwnProperty("error")?(LogZimbra.log("¡URL no válida!"),e.statusURL=chrome.i18n.getMessage("options_invalid_url"),e.estilo.colorStatusUrl={color:"red"},e.deshabilitarBotones=!1,void e.$apply()):(LogZimbra.log("URL correcta. Voy a establecer opciones. $scope.opciones="+JSON.stringify(e.opciones)),void OpcionesStorage.setOpciones(e.opciones,function(){LogZimbra.log("callback URL correcta"),e.status=chrome.i18n.getMessage("options_saved"),e.statusURL=chrome.i18n.getMessage("options_saved"),e.estilo.colorStatusUrl={},e.deshabilitarBotones=!1,e.$apply(),o(function(){i()},2e3)}))},e.restablecerOpciones=function(){LogZimbra.log("Restablecer Opciones. Inicio"),e.deshabilitarBotones=!0,OpcionesStorage.getOpciones(function(o){LogZimbra.log("Restablecer Opciones. Callback. Opciones recibidas: "+JSON.stringify(o)),e.opciones=o,e.deshabilitarBotones=!1,e.$apply()})},e.urlZimbraModificado=function(){""!=e.statusURL&&(e.statusURL="",e.estilo.colorStatusUrl={})},e.navegadorEsFirefox=function(){return UtilesFirefox.navegadorEsFirefox()},s()})}]);